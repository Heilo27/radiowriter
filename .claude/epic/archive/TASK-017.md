# TASK-017: [CRITICAL-Q3] Handle partial sends in XNLConnection socket operations

**Status:** Done
**Priority:** Critical
**Assignee:** Unassigned
**Created:** 2026-02-02
**Updated:** 2026-02-02

---

## Description

**Source:** Code Review 2026-02-02 (Aegis)
**Severity:** Critical
**Category:** Quality

**Location:** XNLConnection.swift:529-555

**Issue:**
```swift
let sent = Darwin.send(socketFD, &bytes, bytes.count, 0)
// No validation that sent == bytes.count
// Partial send not handled
```

**Impact:** Partial sends can corrupt protocol state, leading to authentication failures or malformed packets.

**Recommendation:**
```swift
var totalSent = 0
while totalSent < bytes.count {
    let sent = Darwin.send(socketFD, &bytes + totalSent, bytes.count - totalSent, 0)
    guard sent > 0 else { throw XNLError.sendFailed }
    totalSent += sent
}
```

---

---

## Acceptance Criteria

- [ ] [Add criteria]

---

## Context

**Why this matters:**
[Business/user context]

**Related:**
- [Link to FRD if applicable]
- [Link to related tasks]

---

## Handoff History

| Time | Agent | Action |
|------|-------|--------|
| 2026-02-02 | System | Created task |

---

## Agent Notes

*Add notes as work progresses*

---

## Blockers

*No blockers*

---

## Completion

**Completed by:** —
**Completed at:** —
**Sign-off:** —

---

*Generated by Ticketmaster*
