# TASK-087: Strengthen password derivation with PBKDF2

**Status:** Done
**Priority:** Critical
**Assignee:** Worf
**Created:** 2026-02-05
**Updated:** 2026-02-09

---

## Description

CodeplugSerializer uses SHA-256 single hash for password derivation, which is vulnerable to brute force attacks. Replace with PBKDF2, scrypt, or Argon2 with proper salt and iteration count.

**Current Implementation (CodeplugSerializer.swift:188-191):**
```swift
private func deriveKey(from password: String) -> SymmetricKey {
    let passwordData = Data(password.utf8)
    let hash = SHA256.hash(data: passwordData)  // Weak!
    return SymmetricKey(data: hash)
}
```

**Issue:** Single SHA-256 hash without salt or iterations makes password cracking trivial.

---

---

---

---

---

---

## Acceptance Criteria

- [ ] Replace SHA-256 with PBKDF2 (100,000+ iterations) or Argon2
- [ ] Generate random salt (16+ bytes) and store in file header
- [ ] Update file format version to indicate new KDF
- [ ] Add migration path for old files
- [ ] Update tests to verify salt uniqueness
- [ ] Document KDF parameters in code comments

---

## Context

**Why this matters:**
[Business/user context]

**Related:**
- [Link to FRD if applicable]
- [Link to related tasks]

---

## Handoff History

| Time | Agent | Action |
|------|-------|--------|
| 2026-02-09 | System | Created task |

---

## Agent Notes

*Add notes as work progresses*

---

## Blockers

*No blockers*

---

## Completion

**Completed by:** —
**Completed at:** —
**Sign-off:** —

---

*Generated by Ticketmaster*
